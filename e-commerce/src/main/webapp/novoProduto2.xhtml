<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:p="http://primefaces.org/ui" xmlns:b="http://bootsfaces.net/ui">

<ui:composition template="gnr_template.xhtml">
	<ui:define name="body">
		<b:form id="formCadastroProduto" enctype="multipart/form-data">
			<b:container fluid="true">
				<b:panel offset-lg="1" title="Cadastro Produto" look="primary"
					collapsible="false" large-screen="10" medium-screen="7">
					<b:panelGrid colSpans="2,8,2">
						<h:outputText value="Código:" />

						<b:inputText id="codigo" value="#{novoProdutoBean.produto.codigo}"
							required="true" required-message="Campo necessário."
							maxlength="6" size="6" />

						<b:message for="codigo" />

						<h:outputText value="Nome:" />

						<b:inputText id="nomeField"
							value="#{novoProdutoBean.produto.nome}" required="true"
							required-message="Campo necessário." />

						<b:message for="nomeField" />

						<h:outputText value="Custo:" />
						<b:inputText id="custo" value="#{novoProdutoBean.produto.preco}"
							required="true" required-message="Campo necessário."
							placeholder="0.00" />

						<b:message for="custo" />

						<h:outputText value="Margem de Lucro:" />
						<b:inputText id="margemLucro"
							value="#{novoProdutoBean.produto.margemDeLucroPorcentual}"
							required="true" required-message="Campo necessário."
							placeholder="0.00%">
							<f:validateDoubleRange minimum="1.00" />
						</b:inputText>

						<b:message for="margemLucro" />

						<h:outputText value="Quantidade:" />
						<b:touchSpin id="quantidade"
							value="#{novoProdutoBean.produto.quantidade}" required="true"
							required-message="Campo necessário." />

						<b:message for="quantidade" />

						<h:outputText value="Imagem:" />
						<h:inputFile id="imagem" value="#{arquivoDAO.salvarArquivo()}"
							required="true" required-message="Uma imagem é necessária." />

						<b:message for="imagem" />

						<h:outputText value="Data:" />
						<b:datepicker id="data" value="#{novoProdutoBean.produto.data}"
							mode="popup-icon" showButtonPanel="true" changeMonth="true"
							changeYear="true" required="true"
							required-message="Campo necessário.">

							<f:convertDateTime locale="pt_BR" dateStyle="short"
								pattern="dd/MM/yyyy" timeZone="Amercia/Sao_Paulo">
							</f:convertDateTime>
						</b:datepicker>



						<b:message for="data" />

						<h:outputText value="Descrição:" />
						<b:inputTextarea id="descricao"
							value="#{novoProdutoBean.produto.descricao}" required="true"
							required-message="Campo necessário." />

						<b:message for="descricao" />
					</b:panelGrid>

					<b:row>
						<b:column offset-lg="5" large-screen="2">
							<b:commandButton value="Cadastrar" look="primary"
								style="width:100%" action="#{novoProdutoBean.salvarProduto()}" />
						</b:column>
					</b:row>
				</b:panel>
			</b:container>

			<h:form>
				<b:container fluid="true">
					<b:panel offset-lg="1" title="Tabela de Produtos" look="primary"
						collapsible="false" large-screen="10" medium-screen="7">

						<h:form>
							<b:dataTable id="tabelaProdutos"
								value="#{novoProdutoBean.produtos}" var="produto"
								class="tabelaProdutoCadastrado" striped="true" responsive="true">

								<b:dataTableColumn label="Imagem"
									value="#{produto.imagemProduto}" />

								<b:dataTableColumn label="Nome" value="#{produto.nome}"
									orderable="true" order-by="dom-text" />

								<b:dataTableColumn label="Descrição"
									value="#{produto.descricao}" order-by="dom-text" />

								<b:dataTableColumn label="Preço" value="#{produto.precoFinal}"
									order="asc" />

								<b:dataTableColumn label="Custo" value="#{produto.preco}"
									order="asc" />

								<b:dataTableColumn label="Margem de Lucro"
									value="#{produto.margemDeLucroPorcentual}" order="asc" />

								<b:dataTableColumn label="Quantidade"
									value="#{produto.quantidade}" />

								<b:dataTableColumn label="Data de entrada"
									value="#{produto.data}" />


								<b:dataTableColumn label="Código" value="#{produto.codigo}"
									order="asc" />

								<b:dataTableColumn label="Editar" value="Editar">
									<b:commandButton value="Editar" icon="edit" ajax="true"
										update=":formCadastroProduto"
										action="#{novoProdutoBean.atualizarProduto(produto)}"
										process="@this">

									</b:commandButton>
								</b:dataTableColumn>
								<b:dataTableColumn label="Deletar" value="Deletar">
									<b:commandButton value="Deletar" iconAwesome="trash"
										ajax="true" action="#{novoProdutoBean.deletaProduto(produto)}">
										<f:ajax execute="@this" render="@form" />
									</b:commandButton>
								</b:dataTableColumn>
							</b:dataTable>
						</h:form>
					</b:panel>
				</b:container>
			</h:form>
		</b:form>
	</ui:define>
</ui:composition>
</html>
