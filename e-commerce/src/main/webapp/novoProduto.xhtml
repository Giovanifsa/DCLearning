<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:p="http://primefaces.org/ui" xmlns:b="http://bootsfaces.net/ui">

<ui:composition template="gnr_template.xhtml">
	<ui:define name="body">
		<b:form id="formCadastroProduto" enctype="multipart/form-data">
			<b:container fluid="true">
				<b:panel offset-lg="2" title="Cadastro Produto" look="primary"
					collapsible="false" large-screen="6" medium-screen="6">
					<b:panelGrid colSpans="2,8,2">
						<h:outputText value="Código:" />

						<b:inputText id="codigo" value="#{novoProdutoBean.produto.codigo}"
							required="true" required-message="Campo necessário."
							maxlength="6" size="6" />

						<b:message for="codigo" />

						<h:outputText value="Nome:" />

						<b:inputText id="nomeField"
							value="#{novoProdutoBean.produto.nome}" required="true"
							required-message="Campo necessário." />

						<b:message for="nomeField" />

						<h:outputText value="Custo:" />
						<b:inputText id="custo" value="#{novoProdutoBean.produto.custo}"
							required="true" required-message="Campo necessário." />

						<b:message for="custo" />

						<h:outputText value="Margem de Lucro:" />
						<b:inputText id="margemLucro"
							value="#{novoProdutoBean.produto.margemDeLucroPorcentual}"
							required="true" required-message="Campo necessário." />

						<b:message for="margemLucro" />

						<h:outputText value="Preço de Venda:" />
						<b:label id="precoVenda" value="#{novoProdutoBean.produto.preco}"
							required="true" required-message="Campo necessário." />

						<b:message for="precoVenda" />

						<h:outputText value="Imagem:" />
						<h:inputFile id="imagem" value="#{novoProdutoBean.imagem}"
							required="true" required-message="Uma imagem é necessária." />

						<b:message for="imagem" />

						<h:outputText value="Descrição:" />
						<b:inputTextarea id="descricao"
							value="#{novoProdutoBean.produto.descricao}" required="true"
							required-message="Campo necessário." />

						<b:message for="descricao" />
					</b:panelGrid>

					<b:row>
						<b:column offset-lg="5" large-screen="2">
							<b:commandButton value="Cadastrar" look="primary"
								style="width:100%" action="#{novoProdutoBean.salvarProduto}" />
						</b:column>
					</b:row>
				</b:panel>
				<h:form>
					<b:dataTable value="#{novoProdutoBean.produtos}" var="produto"
						class="tabelaProdutoCadastrado">
						<b:dataTableColumn value="#{produto.imagemProduto}" />
						<b:dataTableColumn value="#{produto.nome}" />
						<b:dataTableColumn value="#{produto.descricao}" />
						<b:dataTableColumn value="#{produto.custo}" order="asc" />
						<b:dataTableColumn label="Margem de Lucro">
							<b:inputText value="#{produto.margemDeLucroPorcentual}"
								rendered="#{car.editable}" />
							<h:outputText value="#{produto.margemDeLucroPorcentual}"
								rendered="#{not car.editable}" />
						</b:dataTableColumn>
						<b:dataTableColumn value="#{produto.codigo}" order="asc" />
						<b:dataTableColumn>
							<b:commandButton value="Editar" icon="edit" ajax="true"
								update="form:formCadastroProduto"
								onclick="ajax:#{novoProdutoBean.salvarProduto()}; javascript:return false;">
								<f:ajax execute="@this" render ="@form"/>
							</b:commandButton>
						</b:dataTableColumn>
						<b:dataTableColumn>
							<b:commandButton value="Deletar" iconAwesome="trash"
								action="#{novoProdutoBean.deletaProduto(produto)}">
								<f:ajax execute="@this" render="@form" />
							</b:commandButton>
						</b:dataTableColumn>
					</b:dataTable>
				</h:form>
			</b:container>
		</b:form>
	</ui:define>
</ui:composition>
</html>
